<%- include ('../partials/header', {signInUrl: signInUrl, signOutUrl: signOutUrl}) -%>
<div class="container-fluid mt-2">
  <h2><%= subtitle %></h2>
  <hr class="my-4">
  <form action="/department" method="POST">
  <a id="createButton" class="btn inter-green inter-green-btn" role="button" data-toggle="modal" data-target="#create-modal">Create New</a>
</div>
<div class="container-fluid my-2">
  <!--Table Header-->
  <div class="row bg-secondary text-light p-2">
      <div class="col"><strong>Name</strong></div>
      <div class="col"><strong>Department ID</strong></div>
      <div class="col"><strong>Description</strong></div>
      <div class="col"><strong>Date Created</strong></div>
      <div class="col-1"></div>
  </div>
  <!-- start for/of loop -->
  <% for (var elem of results) {%>
  <div class="row py-2 btn-light">
      <div class="col"><%= elem.dep_name %></div>
      <div class="col"><%= elem.dep_ID %></div>
      <div class="col"><%= elem.dep_description %></div>
      <div class="col"><%= elem.date_created %></div>
      <div class="col-2 dropdown">
        <button class="btn inter-green inter-green-btn dropdown-toggle" type="button" data-toggle="dropdown">
          Actions
        </button>
        <div class="dropdown-menu">
            <a class="dropdown-item" href="/department/<%= this.dep_ID %>/edit">Edit</a>
            <a id="deleteButton" class="dropdown-item" href="/department/<%= this.dep_ID %>" role="button" data-toggle="modal" data-target="#delete-modal">Delete</a>
        </div>
      </div>
  </div>
  <% } %>
</div>
<div class="modal fade" id="create-modal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header text-light inter-yellow">
        <h5 class="modal-title">Create New</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
       <!-- Modal contents go here  -->
      <div class="modal-body">
        <div class="container-fluid">
          <form action="/department" method="POST">
            <div class="row">
                <label for="dept-name"><strong>Name</strong></label>
                <input class="form-control" type="text" id="dept-name" name="depName" required>
            </div>
            <div class="row my-4">
                <label for="dept-desc"><strong>Description</strong></label>
                <input class="form-control" type="text" id="dept-desc" name="depDesc" required>
            </div>
            <div class="row d-flex flex-row-reverse my-4">
                <button type="submit" class="btn inter-green inter-green-btn">Create</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- {{!-- Modal for Create New Ends here --}}

{{!-- Modal for Delete Starts here --}} -->

<div class="modal fade" id="delete-modal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header text-light inter-yellow">
        <h5 class="modal-title">Delete</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <!-- {{!-- Modal contents go here --}} -->
      <div class="modal-body">
        <div class="container-fluid">
          <h4>Are you sure you want to delete this Department?</h4>
          <hr class="my-4">
          <div class="row justify-content-center">
              <div class="col-3 text-right"><strong>Name</strong></div>
              <div class="col">{{this.dep_name}}</div>
          </div>
          <div class="row justify-content-center">
              <div class="col-3 text-right"><strong>Description</strong></div>
              <div class="col">{{this.dep_description}}</div>
          </div>
          <div class="row justify-content-center">
            <div class="col-3 text-right"><strong>Date Created</strong></div>
            <div class="col">{{this.date_created}}</div>
          </div>
          <form action="/department/{{this.dep_ID}}?_method=DELETE" method="POST"></form>
            <div class="row justify-content-center my-4">
                <div class="col-3"></div>
                <div class="col"><button type="submit" class="btn btn-outline-secondary">Delete</button></div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- {{!-- Modal for Delete end here --}} -->

<%- include ('../partials/footer') -%>

<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
<script src="/public/javascripts/departmentBE.js" type="text/javascript"></script>
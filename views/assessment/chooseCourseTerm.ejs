<%- include ('../admin/partials/header', {signInUrl: signInUrl, signOutUrl: signOutUrl}) -%>

    <form action="/assessment/chooseCourseTerm" method="POST">
        <div class ="container">
            <h1 class = "my-4"> Choose Course and Term</h1>
            <hr class = "my-2 mx-4">
            <!--Term Selection-->
            <div class = "form-group">
                <label for ="chooseStudyProgram">Choose a study program</label>
                <select class="form-control" name = "prog_ID" id="chooseStudyProgram" >
                    <% for (let val of program) { %> 
                        <option value = "<%= val.prog_ID %>"><%= val.prog_name %></option>
                    <% } %> 
                </select>
            </div>
            <!-- Course Selection -->
            <div class="form-group">
                <label for="chooseCourse">Choose a course</label>
                <select class="form-control" name="course_ID" id="chooseCourse" onchange=>
                    <% for (let val of course) { %>
                        <option value ="<%=val.course_ID%>"> <%= val.course_name %></option>
                    <% } %> 
                </select>
            </div>
            <!--Term Selection-->
            <div class = "form-group">
                <label for ="chooseTerm">Choose a term</label>
                <select class="form-control" name="term_ID" id="chooseTerm">
                    <% for (let val of term) { %>
                        <option value = "<%= val.term_ID %> "><%= val.term_name %></option>
                    <% } %> 
                </select>
            </div>
            <div class = "form-group">
                <label for ="chooseRubric">Choose a rubric</label>
                <select class="form-control" name="rubric_ID" id="chooseRubric">
                    <% for (let val of rubric) { %>
                        <option value = "<%= val.rubric_ID %>"><%=val.rubric_name%></option>
                    <% } %> 
                </select>
            </div>
        </div>
        <!--Nav Buttons-->

        <div class="container text-right pt-2">
            <hr class= "my-2">
            <div class="row">
                <div class="col">
                    <div class="btn-group" role="group" aria-label="Next-Save-Cont">
                        <button type="submit" role="button" class="btn btn-secondary">Next</button>
                        <!-- <button type="button" class="btn btn-secondary">Save Evaluation</button> -->
                        <button type="button" class="btn btn-secondary" disabled>Finish</button>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <script>
        $(document).ready(() => {
            $("#chooseStudyProgram").change(function () {
                var selected = $(this).children("option:selected").val();
                console.log(selected);
                $.ajax({
                    url: `/assessment/${selected}/chooseCourseTerm`,
                    type: 'GET',
                    dataType: 'json',
                    success: (data) => {
                        console.log(data);
                    }
                });
            });
        });
    </script>

<%- include ('../admin/partials/footer') -%>